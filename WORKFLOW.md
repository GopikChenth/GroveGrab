# ğŸ”„ GroveGrab - Application Workflow

Visual guide to how the application works from start to finish.

---

## ğŸ¯ Complete Download Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER STARTS                          â”‚
â”‚                     Opens http://localhost:5173              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND LOADS (React)                     â”‚
â”‚  â€¢ App.jsx initializes                                        â”‚
â”‚  â€¢ Loads configuration from backend                           â”‚
â”‚  â€¢ Checks if credentials are configured                       â”‚
â”‚  â€¢ Starts task polling (every 2 seconds)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ NO CREDENTIALS?   â”‚   â”‚ CREDENTIALS SET?     â”‚
    â”‚ Show Warning      â”‚   â”‚ Show Download Card   â”‚
    â”‚ Click Settings âš™ï¸  â”‚   â”‚ Ready to Download    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                        â”‚
              â–¼                        â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚ CONFIGURE        â”‚              â”‚
    â”‚ ConfigModal      â”‚              â”‚
    â”‚ â€¢ Enter Client ID â”‚             â”‚
    â”‚ â€¢ Enter Secret   â”‚              â”‚
    â”‚ â€¢ Set Preferencesâ”‚              â”‚
    â”‚ â€¢ Save           â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
              â”‚                        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER ENTERS SPOTIFY URL                    â”‚
â”‚  Paste URL in DownloadCard component                         â”‚
â”‚  â€¢ Track:    spotify.com/track/...                           â”‚
â”‚  â€¢ Playlist: spotify.com/playlist/...                        â”‚
â”‚  â€¢ Album:    spotify.com/album/...                           â”‚
â”‚  â€¢ Artist:   spotify.com/artist/...                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               USER CLICKS "START DOWNLOAD"                    â”‚
â”‚  â€¢ DownloadCard validates input                              â”‚
â”‚  â€¢ Calls api.startDownload(url, path)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 FRONTEND â†’ BACKEND REQUEST                    â”‚
â”‚  POST http://localhost:5000/api/download                     â”‚
â”‚  Body: { url, download_path }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKEND RECEIVES REQUEST (Flask)                 â”‚
â”‚  app.py â†’ start_download() endpoint                          â”‚
â”‚  â€¢ Validates URL                                             â”‚
â”‚  â€¢ Creates unique task_id (UUID)                             â”‚
â”‚  â€¢ Starts background thread                                  â”‚
â”‚  â€¢ Returns: { task_id, status: "started" }                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DOWNLOAD MANAGER (Background Thread)                â”‚
â”‚  download_manager.py â†’ start_download()                      â”‚
â”‚  â€¢ Creates task entry in memory                              â”‚
â”‚  â€¢ Builds SpotDL command                                     â”‚
â”‚  â€¢ Adds Spotify credentials                                  â”‚
â”‚  â€¢ Sets audio format & quality                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SPOTDL EXECUTION STARTS                     â”‚
â”‚  spotdl <url>                                                 â”‚
â”‚    --client-id <your_id>                                     â”‚
â”‚    --client-secret <your_secret>                             â”‚
â”‚    --output <download_path>                                  â”‚
â”‚    --format mp3                                              â”‚
â”‚    --bitrate 320k                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  SPOTIFY API       â”‚   â”‚  YOUTUBE         â”‚
    â”‚  â€¢ Get metadata    â”‚   â”‚  â€¢ Search songs  â”‚
    â”‚  â€¢ Track info      â”‚   â”‚  â€¢ Get audio     â”‚
    â”‚  â€¢ Album art       â”‚   â”‚  â€¢ Download      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FFMPEG CONVERSION                          â”‚
â”‚  â€¢ Converts YouTube audio to target format                   â”‚
â”‚  â€¢ Applies audio quality settings                            â”‚
â”‚  â€¢ Embeds metadata (artist, title, album art)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DOWNLOAD PROGRESS TRACKING                   â”‚
â”‚  download_manager.py â†’ _parse_progress()                     â”‚
â”‚  â€¢ Monitors SpotDL output line by line                       â”‚
â”‚  â€¢ Updates task status                                       â”‚
â”‚  â€¢ Updates progress percentage                               â”‚
â”‚  â€¢ Logs each event                                           â”‚
â”‚  â€¢ Counts completed/failed tracks                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND POLLING LOOP                       â”‚
â”‚  Every 2 seconds:                                            â”‚
â”‚  GET http://localhost:5000/api/tasks                         â”‚
â”‚  â€¢ Gets all task statuses                                    â”‚
â”‚  â€¢ Updates UI with progress                                  â”‚
â”‚  â€¢ Shows current track                                       â”‚
â”‚  â€¢ Updates progress bars                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER SEES REAL-TIME UI                     â”‚
â”‚  TaskItem component shows:                                   â”‚
â”‚  â€¢ Status badge (Running/Completed/Failed)                   â”‚
â”‚  â€¢ Progress bar (0-100%)                                     â”‚
â”‚  â€¢ Current track name                                        â”‚
â”‚  â€¢ Completed tracks count                                    â”‚
â”‚  â€¢ Failed tracks count                                       â”‚
â”‚  â€¢ Action buttons (Cancel/Retry/Delete/Logs)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  SUCCESS PATH      â”‚   â”‚  FAILURE PATH    â”‚
    â”‚  â€¢ All tracks OK   â”‚   â”‚  â€¢ Some failed   â”‚
    â”‚  â€¢ Status=Complete â”‚   â”‚  â€¢ Status=Failed â”‚
    â”‚  â€¢ Progress=100%   â”‚   â”‚  â€¢ Show errors   â”‚
    â”‚  â€¢ Files saved     â”‚   â”‚  â€¢ Enable retry  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DOWNLOAD COMPLETE!                        â”‚
â”‚  â€¢ Audio files saved to download folder                      â”‚
â”‚  â€¢ Metadata embedded (artist, title, album)                 â”‚
â”‚  â€¢ Task marked as completed/failed                           â”‚
â”‚  â€¢ User can view logs, retry, or delete                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Configuration Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Clicks âš™ï¸   â”‚
â”‚  Settings Button â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ConfigModal Opens           â”‚
â”‚  â€¢ Shows current settings    â”‚
â”‚  â€¢ Empty if first time       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Enters Credentials     â”‚
â”‚  â€¢ Client ID                 â”‚
â”‚  â€¢ Client Secret             â”‚
â”‚  â€¢ Download Path             â”‚
â”‚  â€¢ Audio Format              â”‚
â”‚  â€¢ Audio Quality             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click "Save Configuration"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/config            â”‚
â”‚  â€¢ Validates credentials     â”‚
â”‚  â€¢ Saves to Backend/.env     â”‚
â”‚  â€¢ Saves to config.json      â”‚
â”‚  â€¢ Returns success           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modal Closes                â”‚
â”‚  â€¢ Download card enabled     â”‚
â”‚  â€¢ Ready to download         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Task Status Lifecycle

```
NOT STARTED â†’ RUNNING â†’ COMPLETED
                 â”‚
                 â”œâ”€â†’ FAILED â†’ (Retry) â†’ RUNNING
                 â”‚
                 â””â”€â†’ CANCELLED
```

### Status Details

| Status | Description | Actions Available |
|--------|-------------|-------------------|
| `running` | Download in progress | Cancel, View Logs |
| `completed` | All tracks downloaded | Delete, View Logs |
| `failed` | Some tracks failed | Retry, Delete, View Logs |
| `cancelled` | User cancelled | Delete, View Logs |

---

## ğŸ”Œ API Request Flow

### Download Flow
```
Frontend              Backend                 SpotDL
   â”‚                     â”‚                      â”‚
   â”‚â”€POST /api/downloadâ”€â†’â”‚                      â”‚
   â”‚                     â”‚                      â”‚
   â”‚â†{task_id}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
   â”‚                     â”‚                      â”‚
   â”‚                     â”‚â”€â”€spawn threadâ”€â”€â†’[BG] â”‚
   â”‚                     â”‚                   â”‚  â”‚
   â”‚                     â”‚                   â”‚â”€â”€â”¼â”€execute spotdlâ”€â†’â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚â”€GET /api/tasksâ”€â”€â”€â”€â”€â†’â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚â†â”€update progressâ”€â”€â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚â†{tasks[]}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚  (polling every 2s) â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚â”€GET /api/tasksâ”€â”€â”€â”€â”€â†’â”‚                   â”‚  â”‚                 â”‚
   â”‚â†{tasks[]}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚  â”‚                 â”‚
   â”‚                     â”‚                   â”‚â†â”€â”‚â”€completeâ”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                     â”‚                   â”‚  â”‚
   â”‚                     â”‚â†â”€mark doneâ”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚
   â”‚                     â”‚                   â”‚  â”‚
   â”‚â”€GET /api/tasksâ”€â”€â”€â”€â”€â†’â”‚                      â”‚
   â”‚â†{status:complete}â”€â”€â”€â”‚                      â”‚
```

---

## ğŸ¨ Component Interaction

```
App.jsx (Root)
    â”‚
    â”œâ”€â†’ Navbar
    â”‚    â”œâ”€â†’ Theme Toggle (useTheme)
    â”‚    â””â”€â†’ Settings Button â†’ Opens ConfigModal
    â”‚
    â”œâ”€â†’ DownloadCard
    â”‚    â””â”€â†’ On Submit â†’ api.startDownload()
    â”‚
    â”œâ”€â†’ TaskItem (for each task)
    â”‚    â”œâ”€â†’ Progress Display
    â”‚    â”œâ”€â†’ Cancel Button â†’ api.cancelTask()
    â”‚    â”œâ”€â†’ Retry Button â†’ api.retryTask()
    â”‚    â”œâ”€â†’ Delete Button â†’ api.deleteTask()
    â”‚    â””â”€â†’ Logs Button â†’ Opens LogsModal
    â”‚
    â”œâ”€â†’ ConfigModal (conditional)
    â”‚    â””â”€â†’ On Save â†’ api.updateConfig()
    â”‚
    â””â”€â†’ LogsModal (conditional)
         â””â”€â†’ Displays: api.getTaskLogs()
```

---

## ğŸ“Š Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Action  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React       â”‚      â”‚  API Service â”‚
â”‚  Component   â”‚â”€â”€â”€â”€â”€â†’â”‚  (api.js)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   Fetch     â”‚
                      â”‚   Request   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Flask      â”‚
                      â”‚  Backend    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Download   â”‚
                      â”‚  Manager    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  SpotDL     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
                â–¼                         â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Spotify    â”‚           â”‚  YouTube    â”‚
         â”‚  API        â”‚           â”‚  DL         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   FFmpeg    â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Audio File â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Polling Mechanism

```
Frontend (useEffect)
    â”‚
    â”‚ Every 2 seconds:
    â”‚
    â”œâ”€â†’ api.getTasks()
    â”‚    â”‚
    â”‚    â””â”€â†’ GET /api/tasks
    â”‚         â”‚
    â”‚         â””â”€â†’ Backend returns all tasks
    â”‚              â”‚
    â”‚              â””â”€â†’ Frontend updates state
    â”‚                   â”‚
    â”‚                   â””â”€â†’ React re-renders
    â”‚                        â”‚
    â”‚                        â””â”€â†’ UI shows progress
    â”‚
    â””â”€â†’ Stop if task complete/failed/cancelled
```

---

## ğŸ¯ Error Handling Flow

```
Error Occurs
    â”‚
    â”œâ”€â†’ Backend Error
    â”‚    â”œâ”€â†’ Caught by try/catch
    â”‚    â”œâ”€â†’ Logged to task logs
    â”‚    â”œâ”€â†’ Status set to 'failed'
    â”‚    â””â”€â†’ Error message added to task
    â”‚
    â”œâ”€â†’ SpotDL Error
    â”‚    â”œâ”€â†’ Captured from stderr
    â”‚    â”œâ”€â†’ Parsed and logged
    â”‚    â”œâ”€â†’ Failed tracks counted
    â”‚    â””â”€â†’ Task marked as failed
    â”‚
    â”œâ”€â†’ Network Error
    â”‚    â”œâ”€â†’ API call fails
    â”‚    â”œâ”€â†’ Frontend catches error
    â”‚    â”œâ”€â†’ Shows error message
    â”‚    â””â”€â†’ User can retry
    â”‚
    â””â”€â†’ Validation Error
         â”œâ”€â†’ Invalid URL
         â”œâ”€â†’ Missing credentials
         â”œâ”€â†’ Shown in UI
         â””â”€â†’ Prevents submission
```

---

## ğŸš€ Startup Sequence

```
1. start-dev.ps1 runs
    â”‚
    â”œâ”€â†’ Opens Terminal 1
    â”‚    â””â”€â†’ cd Backend
    â”‚         â””â”€â†’ python app.py
    â”‚              â”œâ”€â†’ Flask starts
    â”‚              â”œâ”€â†’ Loads config
    â”‚              â””â”€â†’ Listening on :5000
    â”‚
    â””â”€â†’ Opens Terminal 2
         â””â”€â†’ cd Client
              â””â”€â†’ npm run dev
                   â”œâ”€â†’ Vite starts
                   â”œâ”€â†’ Compiles React
                   â””â”€â†’ Listening on :5173

2. User opens http://localhost:5173
    â”‚
    â””â”€â†’ React app loads
         â”œâ”€â†’ Fetches config from backend
         â”œâ”€â†’ Starts polling loop
         â””â”€â†’ Renders UI
```

---

## ğŸ“± User Journey

```
First Time User:
    1. Open app â†’ See warning
    2. Click settings â†’ Enter credentials
    3. Save â†’ Warning disappears
    4. Enter URL â†’ Click download
    5. Watch progress â†’ Download completes
    6. Find files in download folder

Returning User:
    1. Open app â†’ Ready to use
    2. Enter URL â†’ Click download
    3. Watch progress â†’ Complete

Power User:
    1. Multiple downloads simultaneously
    2. View logs for debugging
    3. Retry failed tracks
    4. Customize settings per download
```

---

**This workflow ensures:**
- âœ… Clear separation of concerns
- âœ… Real-time feedback
- âœ… Robust error handling
- âœ… Scalable architecture
- âœ… Great user experience
